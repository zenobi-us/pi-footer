#!/usr/bin/env bun
// vim: set ft=typescript :
//MISE description="Generate JSON schema files from TypeBox config schemas"
//MISE sources=["src/services/config/schema.ts"]
//MISE outputs=["config.schema.json"]

import { mkdir } from 'node:fs/promises';
import { ConfigSchema } from '../../src/services/config/schema.ts';

const jsonSchemaDraft = 'https://json-schema.org/draft/2020-12/schema';

await Bun.write(
  './config.schema.json',
  `${JSON.stringify({ $schema: jsonSchemaDraft, ...ConfigSchema }, null, 2)}\n`
);

process.stdout.write('Generated JsonSchema\n');
